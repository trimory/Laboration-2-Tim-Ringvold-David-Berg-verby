@using System.Text.Json;
@using Laboration2MVC.Models;

@{
    ViewData["Title"] = "Transaktioner";
    var apiResponse = ViewData["apiResult"] as List<TransactionModel>;
}

<div class="text-center">
    <h1 class="display-3">Välkommen till Stuxnets bank!</h1
        <h2>
        <a asp-controller="Edit" asp-action="EditView">
            Klicka här för att ta dig till din transaktionshistorik

        </a>
    </h2>
    <h2>Transaktionshistorik:</h2>

    @if (apiResponse != null)
    {
       
        <table class="table">
            <thead>
                <tr>
                    <th>Transaktions-ID</th>
                    <th>Bokningsdatum</th>
                    <th>Transaktionsdatum</th>
                    <th>Kategori(* indikerar ändring av användaren)</th>
                    <th>Belopp</th>
                    <th>Saldo efter transaktion</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var transaction in apiResponse)
                {
                    <tr>
                        
                        <td>@transaction.TransactionID</td>
                        <td>@transaction.BookingDate</td>
                        <td>@transaction.TransactionDate</td>
                        <td>@transaction.Reference
                            @if(transaction.IsUserReferenceChanged == true)
                            {
                                <span>*</span>
                            }


                        </td>
                        
                        <td>@transaction.Amount</td>
                        <td>@transaction.Balance</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>Du har ingen transaktionshistorik.</p>
    }

</div>
